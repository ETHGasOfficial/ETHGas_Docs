---
sidebar_position: 1
---

# WebSocket

WEBSOCKET

## Path

`/ws`

The websocket channel provides access of streaming data subscriptions and queries on public/private data.

### Sample Python Script

```python
import json

import websocket
from websocket import WebSocket

__ws_url = "wss://mainnet.app.ethgas.com/ws"


def on_open(ws: WebSocket):
    message = {
        "op": "subscribe",
        "args": [
            {
                "channel": "orderBookUpdate",
                "marketType": "wholeBlock"
            }
        ]
    }
    ws.send(json.dumps(message))


def on_message(ws: WebSocket, message: str):
    print(f"Received message: {message}")


def on_error(ws: WebSocket, error: Exception):
    print(f"Error: {error}")


def on_close(ws: WebSocket, close_status_code: int, close_msg: str):
    print("WebSocket closed")


if __name__ == "__main__":
    ws_app = websocket.WebSocketApp(
        __ws_url,
        on_open=on_open,
        on_message=on_message,
        on_close=on_close,
        on_error=on_error,
    )
    ws_app.run_forever()
```

## Quick Navigation

<div className="quick-nav">

<div className="row" style={{ marginBottom: '1rem' }}>
  <div className="col col--4">
    <div className="feature-card text--center" style={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>
      <div>
        <h3>Connection</h3>
        <p>WebSocket URLs and connection basics.</p>
      </div>
      <div style={{ marginTop: '1.5rem' }}>
        <a href="#connection-information" className="button button--outline button--sm">
          View Connection Info →
        </a>
      </div>
    </div>
  </div>
  <div className="col col--4">
    <div className="feature-card text--center" style={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>
      <div>
        <h3>Channels</h3>
        <p>Public and private channels.</p>
      </div>
      <div style={{ marginTop: '1.5rem' }}>
        <a href="#channel-types" className="button button--outline button--sm">
          View Channels →
        </a>
      </div>
    </div>
  </div>
  <div className="col col--4">
    <div className="feature-card text--center" style={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>
      <div>
        <h3>Messages</h3>
        <p>Message structure and commands.</p>
      </div>
      <div style={{ marginTop: '1.5rem' }}>
        <a href="#message-structure" className="button button--outline button--sm">
          View Message Format →
        </a>
      </div>
    </div>
  </div>
</div>

</div>

## Connection Information {#connection-information}

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="mainnet" label="MainNet" default>

**WebSocket URL**: `wss://mainnet.app.ethgas.com/ws`

</TabItem>
<TabItem value="testnet-hoodi" label="TestNet (Hoodi)">

**WebSocket URL**: `wss://hoodi.app.ethgas.com/ws`

</TabItem>
<TabItem value="testnet-private" label="TestNet (Private Chain)">

**WebSocket URL**: `wss://testchain.app.ethgas.com/ws`

</TabItem>
</Tabs>

### Connection Requirements

- **Protocol**: WebSocket (WSS)
- **Authentication**: Required for private channels
- **Rate Limiting**: Applied to prevent abuse

> A private websocket session needs to include the access token in the session header, format: 'Bearer accessToken'

## Message Structure {#message-structure}

### Request

| Field | Required | Type | Description |
| --- | --- | --- | --- |
| op | YES | string | operation type |
| args | YES | object[] | list of operation arguments |

### Response (generic)

| Field | Type | Description |
| --- | --- | --- |
| e | string | Event type |
| E | integer | Event timestamp |
| s | string | Instrument ID |
| P | object | Data of corresponding event type |

## Commands

### Authentication

- `login`
- `logout`

### Subscription

- `subscribe`
- `unsubscribe`

### Query

- `query`

## Channel Types {#channel-types}

<div className="row" style={{ marginBottom: '2rem' }}>
  <div className="col col--6">
    <div className="feature-card" style={{ height: '100%', padding: '1.5rem', border: '1px solid rgba(0, 162, 199, 0.2)', background: 'rgba(0, 162, 199, 0.02)' }}>
      <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
        <h3 style={{ color: 'var(--ifm-color-primary)', marginBottom: '0.5rem', fontSize: '1.25rem', fontWeight: '600' }}>Public Channels</h3>
        <p style={{ margin: '0', color: 'var(--ifm-color-emphasis-600)', fontSize: '0.9rem', lineHeight: '1.4' }}>Real-time market data available to all users</p>
      </div>
      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Preconf Market Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Candlestick Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Recent Trades Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Order Book Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Ticker Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Inclusion Preconf Top Sales</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: 'var(--ifm-color-primary)', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Block Builder Update</span>
        </div>
      </div>
    </div>
  </div>
  <div className="col col--6">
    <div className="feature-card" style={{ height: '100%', padding: '1.5rem', border: '1px solid rgba(239, 68, 68, 0.2)', background: 'rgba(239, 68, 68, 0.02)' }}>
      <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
        <h3 style={{ color: '#ef4444', marginBottom: '0.5rem', fontSize: '1.25rem', fontWeight: '600' }}>Private Channels</h3>
        <p style={{ margin: '0', color: 'var(--ifm-color-emphasis-600)', fontSize: '0.9rem', lineHeight: '1.4' }}>User-specific data requiring authentication</p>
      </div>
      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: '#ef4444', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Account Order Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: '#ef4444', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Account Transaction Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: '#ef4444', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Account Position Update</span>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '6px', transition: 'background-color 0.2s ease' }}>
          <span style={{ color: '#ef4444', fontSize: '1rem', fontWeight: '600' }}>→</span>
          <span style={{ color: 'var(--ifm-color-emphasis-700)', fontSize: '0.95rem' }}>Preconf Bundle Update</span>
        </div>
      </div>
    </div>
  </div>
</div>

## Error Handling {#error-handling}

For all error codes and handling guidance (WebSocket and REST), see the Error Codes Reference:

- [Error Codes](/docs/reference/error-codes#websocket-errors)

| Error Code | Description |
|------------|-------------|
| 1001 | Authentication failed |
| 1002 | Invalid channel |
| 1003 | Rate limit exceeded |
| 1004 | Connection timeout |

<!-- ## References

- WebSocket section: This documentation  -->



## Public Channels (Examples)

### Preconf Market Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "preconfMarketUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "preconfMarketUpdate",
    "E": 1744684899022,
    "s": "ETH-PC-603410",
    "a": "NewEpoch",
    "P": {
        "m": 1000000603410,
        "T": "inclusionPreconf",
        "s": 603410,
        "i": "ETH-PC-603410",
        "n": "Eth Preconf Inclusion Slot #603410",
        "M": 1744685494000,
        "f": 1744686266000,
        "b": 1744685498000,
        "q": "1",
        "mQ": "1",
        "MQ": "36000000",
        "PS": "0.00000000001",
        "mP": "0.00000000001",
        "MP": "0.00001",
        "C": "3.99996",
        "A": 36000000,
        "r": 0,
        "S": 0,
        "e": 1,
        "a": 1744685496000,
        "c": 1744684899000,
        "u": 1744684899000,
        "tp": 36000000
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | channel name, e.g. preconfMarketUpdate` |
| └ marketType | string | Market type, e.g., inclusionPreconf`. |


### Candlestick Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "candlestickUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "candlestickUpdate",
    "E": 1736742241012,
    "s": "ETH-PC-117",
    "P": {
        "I": "ETH-PC-117",
        "m": 1000000000117,
        "t": 1736742240000,
        "i": 1000,
        "o": "0",
        "h": "0",
        "l": "0",
        "c": "0",
        "v": "0",
        "F": true
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., candlestickUpdate`. |
| └ marketType | string | Market type, e.g., inclusionPreconf`. |


### Recent Trades Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "recentTradeUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "recentTradeUpdate",
    "E": 1739528277074,
    "s": "ETH-PC-173649",
    "P": {
        "i": "ETH-PC-173649",
        "p": "0.00000000006",
        "q": "1702005",
        "s": true,
        "d": 1739528277070,
        "t": 683198
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., recentTradeUpdate |
| └ marketType | string | Market type, e.g., inclusionPreconf. |


### Order Book Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "orderBookUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "orderBookUpdate",
    "E": 1736751224943,
    "s": "ETH-PC-863",
    "P": {
        "a": [],
        "b": [
            {
                "p": "0.00000000005",
                "q": "5861476"
            }
        ],
        "I": "ETH-PC-863",
        "t": 1736751224941
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., orderBookUpdate. |
| └ marketType | string | Market type, e.g., inclusionPreconf. |


### Ticker Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "tickerUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "tickerUpdate",
    "E": 1743667424734,
    "s": "ETH-PC-518598",
    "P": {
        "d": false,
        "p": "0.00000000002",
        "b": "0.00000000002",
        "M": "0.00000000002",
        "A": 18855242,
        "g": 17144758,
        "P": 1.0,
        "u": 1743667299000
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., tickerUpdate. |
| └ marketType | string | Market type, e.g., inclusionPreconf. |


### Inclusion Preconf Top Sales

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "inclusionPreconfSaleUpdate"
        }
    ]
}
```

Example Response

```json
{
    "e": "inclusionPreconfSaleUpdate",
    "E": 1739765044256,
    "P": {
        "s": 193373,
        "g": "11288799",
        "S": [
            {
                "p": "0.0000000001",
                "q": "11078799"
            }
        ]
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., inclusionPreconfSaleUpdate. |



## Private Channels (Examples)

### Account Order Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
             "channel": "accountOrderUpdate",
             "marketType": "inclusionPreconf",
             "pricerOnly": false
        }
    ]
}
```

Example Response

```json
{
    "e": "accountOrderUpdate",
    "E": 1742288403296,
    "s": "ETH-PC-403684",
    "P": {
        "o": 173639360,
        "c": "613ec528",
        "a": 2049,
        "C": 53,
        "t": 2,
        "i": "ETH-PC-403684",
        "m": 1000000403684,
        "p": "0.00000000001",
        "q": "3181683",
        "F": "3181683",
        "fp": "0.00003181683",
        "f": "0.0000028635147",
        "s": false,
        "P": false,
        "S": 10,
        "d": 1742288403289,
        "u": 1742288403289
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., accountOrderUpdate. |
| └ marketType | string | Market type, e.g., inclusionPreconf. |
| └ pricerOnly | boolean | Flag for only displaying pricer information. Optional. Default to false. |


### Account Transaction Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "accountTransactionUpdate",
            "marketType": "inclusionPreconf"
        }
    ]
}
```

Example Response

```json
{
    "e": "accountTransactionUpdate",
    "E": 1742288580882,
    "s": "ETH-PC-403699",
    "P": {
        "t": 146600149,
        "i": "ETH-PC-403699",
        "o": 173651088,
        "a": 2049,
        "s": true,
        "p": "0.00000000001",
        "q": "1248972",
        "f": "0.0000011240748",
        "d": 1742288580863
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., accountTransactionUpdate. |
| └ marketType | string | Market type, e.g., inclusionPreconf. |


### Account Position Update

Example Request

```json
{
    "op": "subscribe",
    "args": [
        {
            "channel": "accountPositionUpdate",
            "marketType": "inclusionPreconf",
            "pricerOnly": true
        }
    ]
}
```

Example Response

```json
{
    "e": "accountPositionUpdate",
    "E": 1742288402217,
    "P": {
        "a": 2049,
        "s": 403684,
        "m": 1,
        "q": "20427356",
        "l": "0",
        "p": "0",
        "e": false,
        "b": false,
        "c": 1742288355000,
        "u": 1742288402000,
        "A": "20427356"
    }
}
```

Fields

| Name | Type | Description |
| --- | --- | --- |
| op | string | e.g. subscribe |
| args | object | Arguments |
| └ channel | string | Channel name, e.g., accountPositionUpdate. |
| └ marketType | string | Market type, e.g., inclusionPreconf. |
| └ pricerOnly | boolean | Flag for only displaying pricer information. Optional. Default to false. |

